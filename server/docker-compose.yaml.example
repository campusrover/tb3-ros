# Code generated by serverctl. DO NOT EDIT.
version: '3.7'
services:
  
  example-relay:
    container_name: example-relay
    hostname: example-relay
    image: xumr0x/tailscale-relay:latest
    environment:
      ROUTES: 172.99.0.0/16
      AUTHKEY: tskey-123abc
    cap_add:
      - NET_ADMIN
    volumes:
      - 'tailscale-data:/tailscale'
    networks:
      example-net:
        ipv4_address: 172.99.0.255

  
  example-proxy:
    container_name: example-proxy
    hostname: example-proxy
    image: traefik:v2.2
    command:
      - "--api.insecure=true"
      - "--api.dashboard=true"
      - "--providers.docker=true"
      - "--providers.docker.exposedbydefault=false"
      - "--entrypoints.web.address=:80"
      - "--entrypoints.ssh.address=:22"
    ports:
      - '80:80'
      - '443:443'
      - '8080:8080'
    cap_add:
      - NET_ADMIN
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    networks:
      example-net:
    labels:
      - "traefik.http.routers.dashboard.rule=Host(`traefik.roslab.example.com`)"
      - "traefik.http.routers.dashboard.service=api@internal"

    
      
  example-mars:
    container_name: example-mars
    hostname: example-mars
    image: cosi119/tb3-ros:latest
    ports:
      - '8080'
      - '6080'
      - '22'
    environment:
      GW_IP: 172.99.0.1
      RELAY_IP: 172.99.0.255
      PASSWORD: dev@ros
    cap_add:
      - NET_ADMIN
    networks:
      - example-net
    volumes:
      - type: volume
        source: rospersistent-example-mars
        target: /my_ros_data
        volume:
            nocopy: false
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.mars_vnc.rule=Host(`vnc.mars.roslab.example.com`)"
      - "traefik.http.routers.mars_vnc.service=mars_vnc"
      - "traefik.http.services.mars_vnc.loadbalancer.server.port=6080"
      - "traefik.http.routers.mars_vnc.entrypoints=web"
      - "traefik.http.routers.mars_vscode.rule=Host(`code.mars.roslab.example.com`)"
      - "traefik.http.routers.mars_vscode.service=mars_vscode"
      - "traefik.http.services.mars_vscode.loadbalancer.server.port=8080"
      - "traefik.http.routers.mars_vscode.entrypoints=web"
      - "traefik.tcp.routers.mars_ssh.rule=HostSNI(`ssh.mars.roslab.example.com`)"
      - "traefik.tcp.routers.mars_ssh.service=mars_ssh"
      - "traefik.tcp.services.mars_ssh.loadbalancer.server.port=22"
      - "traefik.tcp.routers.mars_ssh.entrypoints=ssh"

    
      
  example-saturn:
    container_name: example-saturn
    hostname: example-saturn
    image: cosi119/tb3-ros:latest
    ports:
      - '8080'
      - '6080'
      - '22'
    environment:
      GW_IP: 172.99.0.1
      RELAY_IP: 172.99.0.255
      PASSWORD: dev@ros
    cap_add:
      - NET_ADMIN
    networks:
      - example-net
    volumes:
      - type: volume
        source: rospersistent-example-saturn
        target: /my_ros_data
        volume:
            nocopy: false
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.saturn_vnc.rule=Host(`vnc.saturn.roslab.example.com`)"
      - "traefik.http.routers.saturn_vnc.service=saturn_vnc"
      - "traefik.http.services.saturn_vnc.loadbalancer.server.port=6080"
      - "traefik.http.routers.saturn_vnc.entrypoints=web"
      - "traefik.http.routers.saturn_vscode.rule=Host(`code.saturn.roslab.example.com`)"
      - "traefik.http.routers.saturn_vscode.service=saturn_vscode"
      - "traefik.http.services.saturn_vscode.loadbalancer.server.port=8080"
      - "traefik.http.routers.saturn_vscode.entrypoints=web"
      - "traefik.tcp.routers.saturn_ssh.rule=HostSNI(`ssh.saturn.roslab.example.com`)"
      - "traefik.tcp.routers.saturn_ssh.service=saturn_ssh"
      - "traefik.tcp.services.saturn_ssh.loadbalancer.server.port=22"
      - "traefik.tcp.routers.saturn_ssh.entrypoints=ssh"

    
      
  example-jupiter:
    container_name: example-jupiter
    hostname: example-jupiter
    image: cosi119/tb3-ros:latest
    ports:
      - '8080'
      - '6080'
      - '22'
    environment:
      GW_IP: 172.99.0.1
      RELAY_IP: 172.99.0.255
      PASSWORD: dev@ros
    cap_add:
      - NET_ADMIN
    networks:
      - example-net
    volumes:
      - type: volume
        source: rospersistent-example-jupiter
        target: /my_ros_data
        volume:
            nocopy: false
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.jupiter_vnc.rule=Host(`vnc.jupiter.roslab.example.com`)"
      - "traefik.http.routers.jupiter_vnc.service=jupiter_vnc"
      - "traefik.http.services.jupiter_vnc.loadbalancer.server.port=6080"
      - "traefik.http.routers.jupiter_vnc.entrypoints=web"
      - "traefik.http.routers.jupiter_vscode.rule=Host(`code.jupiter.roslab.example.com`)"
      - "traefik.http.routers.jupiter_vscode.service=jupiter_vscode"
      - "traefik.http.services.jupiter_vscode.loadbalancer.server.port=8080"
      - "traefik.http.routers.jupiter_vscode.entrypoints=web"
      - "traefik.tcp.routers.jupiter_ssh.rule=HostSNI(`ssh.jupiter.roslab.example.com`)"
      - "traefik.tcp.routers.jupiter_ssh.service=jupiter_ssh"
      - "traefik.tcp.services.jupiter_ssh.loadbalancer.server.port=22"
      - "traefik.tcp.routers.jupiter_ssh.entrypoints=ssh"

    
  
networks:
  example-net:
    ipam:
      driver: default
      config:
        - subnet: 172.99.0.0/16

volumes:
  tailscale-data:
      
  rospersistent-example-mars:
    driver_opts:
      type: none
      device: /Users/julianho/Juho/Work/tb3-ros/server/data/rospersistent-example-mars
      o: bind

      
  rospersistent-example-saturn:
    driver_opts:
      type: none
      device: /Users/julianho/Juho/Work/tb3-ros/server/data/rospersistent-example-saturn
      o: bind

      
  rospersistent-example-jupiter:
    driver_opts:
      type: none
      device: /Users/julianho/Juho/Work/tb3-ros/server/data/rospersistent-example-jupiter
      o: bind

  
